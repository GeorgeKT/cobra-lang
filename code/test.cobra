import "cobra/std/io"

var
    Y = 8888
    A = 18

const X = 7777

union Action:
    Move(x: int, y: int)
    MoveUp(dist: int)
    MoveDown(dist: int)

    pub func perform(self):
        match self:
            Move(x, y):
                print("move $x $y")
            MoveUp(d):
                print("move up $d")
            MoveDown(d):
                print("move down $d")



struct Foo:
    var x: int = 0
    var y: int = 0
    var z: int = 0

    func test(self, a: int):
        if a > 5:
            x += a
        else if a == 5:
            y += a
        else:
            z += a

    func sum(self) -> int:
        return self.x + self.y + self.z

    func __destroy__(self):
        print("This is the destructor")

func test(a: int) -> int:
    print("A is $a")
    var f = Foo(1, 2, 3)
    var i = 0
    while i < a:
        f.test(i)
        i++
    # this is a comment
    return f.sum()

func main() -> int:
    const b = test(5)
    print("bar $b\n")
